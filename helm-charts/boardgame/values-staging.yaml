# ============================================================
# STAGING ENVIRONMENT OVERRIDES
# ============================================================
# This file contains STAGING-specific configurations.
# Merged with values.yaml during deployment.
#
# Deploy command:
#   helm upgrade boardgame-staging . -f values.yaml -f values-staging.yaml

environment: staging

# ============================================================
# DEPLOYMENT - HA setup with more resources
# ============================================================
replicaCount: 0        # High availability (spread across nodes)

resources:
  limits:
    cpu: 500m           # More CPU for STAGING load
    memory: 512Gi          # More memory for STAGING
  requests:
    cpu: 200m            # Higher requests ensure QoS
    memory: 512Mi

# ============================================================
# APPLICATION - STAGING-hardened settings
# ============================================================
env:
  # DISABLE H2 console in STAGING (security)
  springH2ConsoleEnabled: "false"
  
  # STAGING-specific env vars:
  # springProfilesActive: "staging"
  # loggingLevel: "INFO"

# ============================================================
# INGRESS - STAGING domain with SSL
# ============================================================
ingress:
  # STAGING domain
  host: boardgame-staging.app.thweb.click
  
  # SSL enabled (Let's Encrypt)
  tls:
    enabled: true
    secretName: boardgame-tls
  
  # STAGING annotations - add rate limiting
  annotations:
    cert-manager.io/cluster-issuer: "letsencrypt-staging"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    
    # STAGING-specific: Rate limiting
    nginx.ingress.kubernetes.io/limit-rps: "100"
    
    # STAGING-specific: Request timeout
    nginx.ingress.kubernetes.io/proxy-read-timeout: "60"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "60"